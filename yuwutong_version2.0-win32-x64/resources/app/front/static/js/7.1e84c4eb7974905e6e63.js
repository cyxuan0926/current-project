webpackJsonp([7],{"/wj6":function(t,e,n){(t.exports=n("yKCJ")(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"advertisement-list.vue",sourceRoot:""}])},"4bL5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("34v0"),s=n.n(a),i=n("EcfS"),r={data:function(){return{searchItems:{provinceId:{type:"select",label:"省份",getting:!0,belong:{value:"id",label:"name"},filterable:!0},typeId:{type:"select",label:"广告类型",getting:!0,belong:{value:"id",label:"name"}},name:{type:"input",label:"广告名称"}}}},computed:s()({},Object(i.e)(["advertisements","provincesAll","advertisementTypes"])),mounted:function(){var t=this;this.getDatas(),this.getProvincesAll().then(function(){t.searchItems.provinceId.options=t.provincesAll,t.searchItems.provinceId.getting=!1}),this.getAdvertisementTypes().then(function(){t.searchItems.typeId.options=t.advertisementTypes,t.searchItems.typeId.getting=!1})},methods:s()({},Object(i.b)(["getAdvertisements","updateAdvertisementStatus","deleteAdvertisement","getProvincesAll","getAdvertisementTypes"]),{sizeChange:function(t){this.$refs.pagination.handleSizeChange(t),this.getDatas()},getDatas:function(){this.getAdvertisements(s()({},this.filter,this.pagination))},onSearch:function(){this.$refs.pagination.handleCurrentChange(1)},onAdd:function(){this.$router.push("/advertisement/add")},onUpdateStatus:function(t,e,n){this.updateAdvertisementStatus({id:t,status:Number(!e)}).then(function(t){t&&(n.status=Number(!e))})},onEdit:function(t){this.$router.push("/advertisement/edit/"+t)},onDelete:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteAdvertisement({id:t}).then(function(t){t&&e.getDatas()})})}})},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"row-container",attrs:{gutter:0}},[n("el-button",{staticClass:"button-add",attrs:{size:"small",type:"primary",plain:""},on:{click:t.onAdd}},[t._v("添加广告")]),t._v(" "),n("m-search",{attrs:{items:t.searchItems},on:{sizeChange:t.sizeChange,search:t.onSearch}}),t._v(" "),n("el-col",{attrs:{span:24}},[n("el-tabs",{attrs:{value:"first",type:"card"}},[n("el-tab-pane",{attrs:{label:"广告",name:"first"}})],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.advertisements.contents,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"name",label:"广告名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"广告类型"}}),t._v(" "),n("el-table-column",{attrs:{label:"广告图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.imageUrl+"?token=523b87c4419da5f9186dbe8aa90f37a3876b95e448fe2a"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"广告有效时间",width:"280px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("Date")(e.row.startDate))+" - "+t._s(t._f("Date")(e.row.endDate))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"provinceName",label:"省份",width:"80px"}}),t._v(" "),n("el-table-column",{attrs:{label:"是否上架","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("isTrue")(e.row.status))+"\n          "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(n){t.onUpdateStatus(e.row.id,e.row.status,e.row)}}},[t._v(" 点击"+t._s(1===e.row.status?"下架":"上架")+" ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"146px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.onEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.onDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("m-pagination",{ref:"pagination",attrs:{total:t.advertisements.total},on:{onPageChange:t.getDatas}})],1)},staticRenderFns:[]};var l=n("Aizv")(r,o,!1,function(t){n("IUyo")},"data-v-ccd010b6",null);e.default=l.exports},IUyo:function(t,e,n){var a=n("/wj6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("bUva")("01a63076",a,!0,{})}});
//# sourceMappingURL=7.1e84c4eb7974905e6e63.js.map