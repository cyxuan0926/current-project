webpackJsonp([3],{SsOu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("34v0"),o=a.n(i),n=a("EcfS"),s={data:function(){return{searchItems:{uuid:{type:"input",label:"身份证号"},prisonerNumber:{type:"input",label:"囚犯号"},name:{type:"input",label:"家属姓名"}},toAuthorize:{},show:{authorize:!1,agree:!1,disagree:!1,imgplus:!1},remarks:"您的身份信息错误",imgSrc:""}},computed:o()({},Object(n.e)(["registrations","frontRemarks"])),mounted:function(){this.getDatas()},methods:o()({},Object(n.b)(["getRegistrations","authorizeRegistrations"]),{sizeChange:function(t){this.$refs.pagination.handleSizeChange(t),this.getDatas()},getDatas:function(){this.getRegistrations(o()({},this.filter,this.pagination))},onSearch:function(){this.$refs.pagination.handleCurrentChange(1)},handleAuthorization:function(t){this.toAuthorize=t,this.show.agree=!1,this.show.disagree=!1,this.remarks="您的身份信息错误",this.show.authorize=!0},onAuthorization:function(t){var e=this,a={id:this.toAuthorize.id,status:t};"DENIED"===t&&(a.remarks=this.remarks),this.authorizeRegistrations(a).then(function(t){t&&(e.show.authorize=!1,e.toAuthorize={},e.getDatas())})},amplifyImage:function(t){this.imgSrc=t+"?token=523b87c4419da5f9186dbe8aa90f37a3876b95e448fe2a",this.show.imgplus=!0}})},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"row-container",attrs:{gutter:0}},[a("m-search",{attrs:{items:t.searchItems},on:{sizeChange:t.sizeChange,search:t.onSearch}}),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-tabs",{attrs:{value:"first",type:"card"}},[a("el-tab-pane",{attrs:{label:"家属注册",name:"first"}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.registrations.contents,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uuid",label:"身份证"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("Date")(e.row.createdAt))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"prisonerNumber",label:"囚号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"relationship",label:"关系"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请状态","class-name":"orange"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("registrationsStatus")(e.row.status))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["PENDING"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleAuthorization(e.row)}}},[t._v("授权\n          ")]):t._e()]}}])})],1)],1),t._v(" "),a("m-pagination",{ref:"pagination",attrs:{total:t.registrations.total},on:{onPageChange:t.getDatas}}),t._v(" "),a("el-dialog",{staticClass:"authorize-dialog",attrs:{visible:t.show.authorize,title:"授权",width:"530px"},on:{"update:visible":function(e){t.$set(t.show,"authorize",e)}}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("请核对申请人照片:")]),t._v(" "),a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.toAuthorize.idCardFront+"?token=523b87c4419da5f9186dbe8aa90f37a3876b95e448fe2a",alt:"身份证正面照"},on:{click:function(e){t.amplifyImage(t.toAuthorize.idCardFront)}}}),t._v(" "),a("img",{attrs:{src:t.toAuthorize.idCardBack+"?token=523b87c4419da5f9186dbe8aa90f37a3876b95e448fe2a",alt:"身份证背面照"},on:{click:function(e){t.amplifyImage(t.toAuthorize.idCardBack)}}}),t._v(" "),a("img",{attrs:{src:t.toAuthorize.avatarUrl+"?token=523b87c4419da5f9186dbe8aa90f37a3876b95e448fe2a",alt:"头像"},on:{click:function(e){t.amplifyImage(t.toAuthorize.avatarUrl)}}})]),t._v(" "),t.show.agree||t.show.disagree?t._e():a("div",{staticClass:"button-box"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.show.agree=!0}}},[t._v("同意")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.show.disagree=!0}}},[t._v("不同意")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.show.authorize=!1}}},[t._v("关闭")])],1),t._v(" "),t.show.agree?a("div",{staticClass:"button-box"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.onAuthorization("PASSED")}}},[t._v("确定申请通过？")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.show.agree=!1}}},[t._v("返回")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.show.authorize=!1}}},[t._v("关闭")])],1):t._e(),t._v(" "),t.show.disagree?a("div",{staticClass:"button-box"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("请选择驳回原因")]),t._v(" "),a("el-select",{model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}},t._l(t.frontRemarks,function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t}})})),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.onAuthorization("DENIED")}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.show.disagree=!1}}},[t._v("返回")]),t._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.show.authorize=!1}}},[t._v("关闭")])],1):t._e()]),t._v(" "),a("el-dialog",{staticClass:"img-dialog",attrs:{visible:t.show.imgplus,width:"440px"},on:{"update:visible":function(e){t.$set(t.show,"imgplus",e)}}},[a("img",{attrs:{src:t.imgSrc}})])],1)},staticRenderFns:[]};var l=a("Aizv")(s,r,!1,function(t){a("U0sS")},"data-v-fd1c7b24",null);e.default=l.exports},U0sS:function(t,e,a){var i=a("tgm0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("bUva")("578257c0",i,!0,{})},tgm0:function(t,e,a){(t.exports=a("yKCJ")(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"registration-list.vue",sourceRoot:""}])}});
//# sourceMappingURL=3.0326b99cc80c0e1e3ec3.js.map