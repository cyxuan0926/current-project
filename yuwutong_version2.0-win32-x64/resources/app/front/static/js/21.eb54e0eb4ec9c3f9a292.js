webpackJsonp([21],{"+OuN":function(e,t,a){(e.exports=a("yKCJ")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"advertisement-edit.vue",sourceRoot:""}])},"J/+Y":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Edqs"),r=a.n(s),i=a("34v0"),n=a.n(i),l=a("EcfS"),o=a("NBYw").a,m={data:function(){return{gettingType:!0,gettingProvince:!0,rules:{name:[{required:!0,message:"请填写广告名称"}],typeId:[{required:!0,message:"请选择广告类型"}],time:[{required:!0,message:"请选择广告有效时间"}],imageUrl:[{required:!0,message:"请上传广告图片"}],status:[{required:!0,message:"请选择是否上架"}]}}},computed:n()({},Object(l.e)(["advertisement","advertisementTypes","provincesAll"])),mounted:function(){var e=this;this.getAdvertismentsDetail({id:this.$route.params.id}).then(function(){e.advertisement.startDate&&e.advertisement.endDate&&(e.advertisement.startDate=o.Date(e.advertisement.startDate),e.advertisement.endDate=o.Date(e.advertisement.endDate),e.advertisement.time=[e.advertisement.startDate,e.advertisement.endDate])}),this.getAdvertisementTypes().then(function(){e.gettingType=!1}),this.getProvincesAll().then(function(){e.gettingProvince=!1})},methods:n()({},Object(l.b)(["getAdvertismentsDetail","updateAdvertisments","getAdvertisementTypes","getProvincesAll"]),{onSubmit:function(e){var t=this;this.$refs.form.validate(function(e){if(e){var a=r()({},t.advertisement);delete a.time,t.updateAdvertisments(a).then(function(e){e&&t.$router.push("/advertisement/list")})}})},onTimeRangeChange:function(e){e?(this.advertisement.startDate=e[0],this.advertisement.endDate=e[1]):(this.advertisement.startDate="",this.advertisement.endDate="")},onSuccess:function(e){this.advertisement.imageUrl=e}})},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"page-edit",attrs:{gutter:0}},[a("el-col",{attrs:{span:13,offset:5}},[a("el-form",{ref:"form",attrs:{model:e.advertisement,"label-position":"top",rules:e.rules}},[a("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请填写广告名称"},model:{value:e.advertisement.name,callback:function(t){e.$set(e.advertisement,"name",t)},expression:"advertisement.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"广告类型",prop:"typeId"}},[a("el-select",{attrs:{loading:e.gettingType,placeholder:"请选择广告类型"},model:{value:e.advertisement.typeId,callback:function(t){e.$set(e.advertisement,"typeId",t)},expression:"advertisement.typeId"}},e._l(e.advertisementTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"广告有效时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"广告开始生效时间","end-placeholder":"广告截止生效时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:e.onTimeRangeChange},model:{value:e.advertisement.time,callback:function(t){e.$set(e.advertisement,"time",t)},expression:"advertisement.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"provinceId"}},[a("el-select",{attrs:{loading:e.gettingProvince,filterable:"",placeholder:"请选择省份"},model:{value:e.advertisement.provinceId,callback:function(t){e.$set(e.advertisement,"provinceId",t)},expression:"advertisement.provinceId"}},e._l(e.provincesAll,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否上架",prop:"status"}},[a("el-radio-group",{model:{value:e.advertisement.status,callback:function(t){e.$set(e.advertisement,"status",t)},expression:"advertisement.status"}},[a("el-radio",{attrs:{label:1}},[e._v("上架")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不上架")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"广告图片",prop:"imageUrl"}},[a("m-upload-img",{attrs:{url:e.advertisement.imageUrl},on:{success:e.onSuccess}})],1)],1),e._v(" "),a("el-button",{staticClass:"submit",attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("更新")])],1)],1)},staticRenderFns:[]};var v=a("Aizv")(m,d,!1,function(e){a("uyOT")},null,null);t.default=v.exports},uyOT:function(e,t,a){var s=a("+OuN");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("bUva")("27ab0924",s,!0,{})}});
//# sourceMappingURL=21.eb54e0eb4ec9c3f9a292.js.map