webpackJsonp([19],{YyDF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("34v0"),n=a.n(i),o=a("EcfS"),s=a("sC46"),r=a("YN9k"),l={data:function(){return{tabNum:"first",pagination:{rows:10,page:1},c:"meetings",searching:{name:"",prisonerNumber:"",uuid:""},dialogVisible:!1,agreeText:"同意",disagreeText:"不同意",authorization:{remarks:"",status:""},isWithdraw:!1,dialogTitle:"",showRemarks:!1,authorizeId:"",callbackId:"",rule:{remarks:[{required:!0,message:"请填写撤回理由",trigger:"blur"}]}}},watch:{withDrawMeetingsResult:function(t){this.dialogVisible=!1}},computed:n()({},Object(o.c)({meetings:"meetings",meetingsTotal:"meetingsTotal",authMeetingsResult:"authMeetingsResult",withDrawMeetingsResult:"withDrawMeetingsResult"}),Object(o.e)(["frontRemarks"])),methods:n()({},Object(o.d)({setAuthMeetingsResult:"setAuthMeetingsResult"}),Object(o.b)({getMeetings:"getMeetings",searchAction:"searchAction",authorizeMeetings:"authorizeMeetings",withDrawMeetings:"withDrawMeetings"}),{sizeChange:function(t){this.pagination.page=1,this.pagination.rows=t,this.change()},currentChange:function(t){this.pagination.page=t,this.change()},change:function(){this.getMeetings(n()({},this.searching,this.pagination))},search:function(t){this.pagination.page=1,this.searching=t,this.getMeetings(n()({},this.searching,this.pagination))},searchingChange:function(t){this.searching=t},handleAuthorization:function(t){this.showRemarks=!1,this.dialogTitle="授权",this.authorization.remarks="您的身份信息错误",this.isWithdraw=!1,this.dialogVisible=!0,this.authorizeId=t,this.agreeText="同意",this.disagreeText="不同意",this.setAuthMeetingsResult({})},handleWithdraw:function(t){this.dialogTitle="撤回",this.authorization.remarks="",this.authorizeId=t,this.isWithdraw=!0,this.dialogVisible=!0},confirmWithdraw:function(){var t=this;this.$refs.withdrawForm.validate(function(e){if(!e)return console.log("submit err!"),!1;t.authorization.status="DENIED",t.withDrawMeetings(n()({id:t.authorizeId},t.authorization))})},agreeAuthorization:function(t){"同意"===t?(this.agreeText="确定申请通过？",this.disagreeText="返回"):("提交"===t?this.authorization.status="DENIED":(this.authorization.remarks="",this.authorization.status="PASSED"),this.authorizeMeetings(n()({id:this.authorizeId},this.authorization)))},disagreeAuthorization:function(t){"返回"===t?(this.showRemarks=!1,this.disagreeText="不同意",this.agreeText="同意"):(this.showRemarks=!0,this.agreeText="提交",this.disagreeText="返回")}}),mounted:function(){this.getMeetings(this.pagination)},components:{SelectAndSearch:s.a,Pagination:r.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{id:"meeting",gutter:0}},[a("select-and-search",{attrs:{c:t.c,searching:t.searching},on:{sizeChange:t.sizeChange,search:t.search,searchingChange:t.searchingChange}}),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.tabNum,callback:function(e){t.tabNum=e},expression:"tabNum"}},[a("el-tab-pane",{attrs:{label:"会见申请",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.meetings,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uuid",label:"身份证"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请时间",prop:"applicationDate"}}),t._v(" "),a("el-table-column",{attrs:{label:"预约时间",prop:"meetingTime"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prisonerNumber",label:"囚号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"relationship",label:"关系"}}),t._v(" "),a("el-table-column",{attrs:{prop:"terminalNumber",label:"终端号"}}),t._v(" "),a("el-table-column",{class:{"application-status":!0},attrs:{label:"申请状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("registrationsStatus")(e.row.status))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["PENDING"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleAuthorization(e.row.id)}}},[t._v("授权\n              ")]):"PASSED"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleWithdraw(e.row.id)}}},[t._v("撤回\n              ")]):t._e()]}}])})],1)],1)],1)],1),t._v(" "),a("pagination",{attrs:{total:t.meetingsTotal,pageSize:t.pagination.rows,currentPage:t.pagination.page},on:{currentChange:t.currentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.isWithdraw?t._e():a("el-row",{attrs:{gutter:0}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.authMeetingsResult.code,expression:"authMeetingsResult.code"}],attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[200==t.authMeetingsResult.code?a("el-alert",{attrs:{title:"授权成功",type:"success",description:t.authMeetingsResult.msg,"show-icon":"",closable:!1}}):t._e()],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.authMeetingsResult.code,expression:"!authMeetingsResult.code"}],attrs:{gutter:0}},[t.showRemarks?a("el-col",{staticClass:"refuse-reason",attrs:{span:24}},[a("el-col",{attrs:{span:24}},[a("p",[t._v("请选择驳回原因")])]),t._v(" "),a("el-select",{model:{value:t.authorization.remarks,callback:function(e){t.$set(t.authorization,"remarks",e)},expression:"authorization.remarks"}},t._l(t.frontRemarks,function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t}})}))],1):t._e(),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.agreeAuthorization(t.agreeText)}}},[t._v(t._s(t.agreeText))])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.disagreeAuthorization(t.disagreeText)}}},[t._v(t._s(t.disagreeText))])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)],1)],1),t._v(" "),t.isWithdraw?a("el-row",{attrs:{gutter:0}},[a("el-row",{attrs:{gutter:0}},[a("el-form",{ref:"withdrawForm",attrs:{model:t.authorization,rules:t.rule}},[a("el-form-item",{attrs:{prop:"remarks"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入撤回理由"},model:{value:t.authorization.remarks,callback:function(e){t.$set(t.authorization,"remarks",e)},expression:"authorization.remarks"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"btn-box",attrs:{gutter:0}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{on:{click:function(e){t.confirmWithdraw()}}},[t._v("确定")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var c=a("Aizv")(l,d,!1,function(t){a("yIxp")},"data-v-645dadc6",null);e.default=c.exports},wdHD:function(t,e,a){(t.exports=a("yKCJ")(!0)).push([t.i,"\n#meeting[data-v-645dadc6] {\n  padding: 20px 1% 0 1%;\n}\n#meeting[data-v-645dadc6] .el-tabs__item {\n  background: #fff;\n}\n#meeting[data-v-645dadc6] .el-table__body-wrapper {\n  overflow: visible;\n}\n#meeting[data-v-645dadc6] .el-table__row > td:nth-child(9) {\n  color: #ffa500;\n  font-weight: bold;\n}\n#meeting[data-v-645dadc6] .cell .el-button--default {\n  float: left;\n  color: #3c8dbc;\n  font-weight: bold;\n}\n#meeting .el-dialog__body .el-row.btn-box[data-v-645dadc6] {\n  margin-top: 20px;\n}\n#meeting .el-dialog__body .el-row.btn-box .el-button[data-v-645dadc6] {\n  float: right;\n  margin-left: 3%;\n}\n#meeting .el-dialog__body .el-row img[data-v-645dadc6] {\n  float: left;\n  width: 150px;\n  height: 150px;\n}\n#meeting .el-dialog__body .el-row .el-col-24[data-v-645dadc6] {\n  margin-top: 5px;\n}\n#meeting .el-dialog__body .el-row .el-col-24.refuse-reason[data-v-645dadc6] {\n  margin-bottom: 10px;\n}\n#meeting .el-dialog__body .el-row .el-col-24 .el-select[data-v-645dadc6],\n#meeting .el-dialog__body .el-row .el-col-24 .el-button[data-v-645dadc6] {\n  width: 100%;\n}","",{version:3,sources:["E:/Project/狱务通重构/yuwutong_version2.0/src/views/meeting/meeting.vue"],names:[],mappings:";AACA;EACE,sBAAsB;CACvB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,YAAY;EACZ,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,aAAa;EACb,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,aAAa;EACb,cAAc;CACf;AACD;EACE,gBAAgB;CACjB;AACD;EACE,oBAAoB;CACrB;AACD;;EAEE,YAAY;CACb",file:"meeting.vue",sourcesContent:["\n#meeting[data-v-645dadc6] {\n  padding: 20px 1% 0 1%;\n}\n#meeting[data-v-645dadc6] .el-tabs__item {\n  background: #fff;\n}\n#meeting[data-v-645dadc6] .el-table__body-wrapper {\n  overflow: visible;\n}\n#meeting[data-v-645dadc6] .el-table__row > td:nth-child(9) {\n  color: #ffa500;\n  font-weight: bold;\n}\n#meeting[data-v-645dadc6] .cell .el-button--default {\n  float: left;\n  color: #3c8dbc;\n  font-weight: bold;\n}\n#meeting .el-dialog__body .el-row.btn-box[data-v-645dadc6] {\n  margin-top: 20px;\n}\n#meeting .el-dialog__body .el-row.btn-box .el-button[data-v-645dadc6] {\n  float: right;\n  margin-left: 3%;\n}\n#meeting .el-dialog__body .el-row img[data-v-645dadc6] {\n  float: left;\n  width: 150px;\n  height: 150px;\n}\n#meeting .el-dialog__body .el-row .el-col-24[data-v-645dadc6] {\n  margin-top: 5px;\n}\n#meeting .el-dialog__body .el-row .el-col-24.refuse-reason[data-v-645dadc6] {\n  margin-bottom: 10px;\n}\n#meeting .el-dialog__body .el-row .el-col-24 .el-select[data-v-645dadc6],\n#meeting .el-dialog__body .el-row .el-col-24 .el-button[data-v-645dadc6] {\n  width: 100%;\n}"],sourceRoot:""}])},yIxp:function(t,e,a){var i=a("wdHD");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("bUva")("13834d01",i,!0,{})}});
//# sourceMappingURL=19.0a103b63cd2c9ed21458.js.map